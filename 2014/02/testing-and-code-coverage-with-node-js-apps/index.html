<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.4.1"/><meta name="description" content="Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy…" data-gatsby-head="true"/><meta name="image" content="https://www.gregjopa.com/greg_jopa_outdoor_headshot.jpg" data-gatsby-head="true"/><meta property="og:title" content="Testing and Code Coverage with Node.js Apps | Greg Jopa" data-gatsby-head="true"/><meta property="og:url" content="https://www.gregjopa.com/2014/02/testing-and-code-coverage-with-node-js-apps" data-gatsby-head="true"/><meta property="og:description" content="Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy…" data-gatsby-head="true"/><meta property="og:image" content="https://www.gregjopa.com/greg_jopa_outdoor_headshot.jpg" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image:alt" content="Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy…" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Testing and Code Coverage with Node.js Apps | Greg Jopa" data-gatsby-head="true"/><meta name="twitter:url" content="https://www.gregjopa.com/2014/02/testing-and-code-coverage-with-node-js-apps" data-gatsby-head="true"/><meta name="twitter:description" content="Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy…" data-gatsby-head="true"/><meta name="twitter:image" content="https://www.gregjopa.com/greg_jopa_outdoor_headshot.jpg" data-gatsby-head="true"/><meta name="twitter:image:alt" content="Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy…" data-gatsby-head="true"/><meta name="twitter:creator" content="@gregjopa" data-gatsby-head="true"/><meta name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog" data-gatsby-head="true"/><meta name="theme-color" content="#6B46C1"/><title data-gatsby-head="true">Testing and Code Coverage with Node.js Apps | Greg Jopa</title><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" data-gatsby-head="true"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" data-gatsby-head="true"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="Minimal Blog - @lekoarts/gatsby-theme-minimal-blog" href="/rss.xml"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 6koz1s">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1w2pyfm">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global h7esfd">*{box-sizing:inherit;}html{-webkit-text-size-adjust:100%;}img{border-style:none;}pre{font-family:monospace;font-size:1em;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:text;}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css 10f80pj">.css-10f80pj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width: 640px){.css-10f80pj{padding:2rem;}}</style><div class="css-10f80pj"><style data-emotion="css egutgn">.css-egutgn{margin-bottom:4rem;}@media screen and (min-width: 640px){.css-egutgn{margin-bottom:8rem;}}</style><header class="css-egutgn"><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 1pbimyf">.css-1pbimyf{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-1pbimyf"><style data-emotion="css uxjqfw">.css-uxjqfw{color:var(--theme-ui-colors-heading);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="Greg Jopa - Back to home" class="css-uxjqfw" href="/"><style data-emotion="css 19i8ga6">.css-19i8ga6{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.5rem;}@media screen and (min-width: 640px){.css-19i8ga6{font-size:1.875rem;}}</style><div class="css-19i8ga6">Greg Jopa</div></a><style data-emotion="css 3ba0x7">.css-3ba0x7{opacity:0.65;position:relative;border-radius:4px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-3ba0x7:hover,.css-3ba0x7:focus{opacity:1;}</style><button type="button" class="css-3ba0x7"><style data-emotion="css 1ggalm8">.css-1ggalm8{position:relative;width:24px;height:24px;border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;-webkit-transform:scale(0.55);-moz-transform:scale(0.55);-ms-transform:scale(0.55);transform:scale(0.55);}.css-1ggalm8:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;border-radius:50%;opacity:0;}.css-1ggalm8:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;-webkit-transition:all 0.35s ease;transition:all 0.35s ease;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}</style><div class="css-1ggalm8"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css bpdkdn">.css-bpdkdn{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-bpdkdn:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-bpdkdn" href="/blog">Blog</a><a class="css-bpdkdn" href="/about">About</a></nav><style data-emotion="css 45ghvz">.css-45ghvz{font-size:1rem;}.css-45ghvz a:not(:first-of-type){margin-left:1rem;}@media screen and (min-width: 640px){.css-45ghvz{font-size:18px;}}</style><div class="css-45ghvz"><style data-emotion="css aizfxq">.css-aizfxq{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-aizfxq:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://github.com/gregjopa/" class="css-aizfxq">GitHub</a><a href="https://twitter.com/gregjopa/" class="css-aizfxq">Twitter</a><a href="https://www.linkedin.com/in/gregjopa/" class="css-aizfxq">LinkedIn</a></div></div></header><style data-emotion="css 14ktnsi">.css-14ktnsi .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-14ktnsi .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-14ktnsi .prism-code{font-size:1.25rem;}}.css-14ktnsi .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-14ktnsi .gatsby-highlight[data-language='none'] .code-content,.css-14ktnsi .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-14ktnsi .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-14ktnsi .token{display:inline-block;}.css-14ktnsi p>code,.css-14ktnsi li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-14ktnsi .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-14ktnsi .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-14ktnsi .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-14ktnsi .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-14ktnsi .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-14ktnsi .gatsby-highlight pre code{float:left;min-width:100%;}.css-14ktnsi .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-14ktnsi .gatsby-highlight pre[class~="language-golang"]:before,.css-14ktnsi .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-javascript"]:before,.css-14ktnsi .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-14ktnsi .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-14ktnsi .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-14ktnsi .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-14ktnsi .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-14ktnsi .gatsby-highlight pre[class~="language-py"]:before,.css-14ktnsi .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-14ktnsi .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-14ktnsi .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-14ktnsi .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-14ktnsi .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-14ktnsi .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-14ktnsi .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-14ktnsi .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-14ktnsi .gatsby-highlight pre[class~='language-json']:before,.css-14ktnsi .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-14ktnsi .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-14ktnsi .gatsby-highlight>code[class*="language-"],.css-14ktnsi .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-14ktnsi .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-14ktnsi .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-14ktnsi .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-14ktnsi .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-14ktnsi .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-14ktnsi .token-line{padding-right:1rem;}.css-14ktnsi .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-14ktnsi .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}</style><style data-emotion="css uc5k88">.css-uc5k88{box-sizing:border-box;margin:0;min-width:0;}.css-uc5k88 .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-uc5k88 .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-uc5k88 .prism-code{font-size:1.25rem;}}.css-uc5k88 .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-uc5k88 .gatsby-highlight[data-language='none'] .code-content,.css-uc5k88 .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-uc5k88 .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-uc5k88 .token{display:inline-block;}.css-uc5k88 p>code,.css-uc5k88 li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-uc5k88 .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-uc5k88 .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-uc5k88 .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-uc5k88 .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-uc5k88 .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-uc5k88 .gatsby-highlight pre code{float:left;min-width:100%;}.css-uc5k88 .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-uc5k88 .gatsby-highlight pre[class~="language-golang"]:before,.css-uc5k88 .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-javascript"]:before,.css-uc5k88 .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-uc5k88 .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-uc5k88 .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-uc5k88 .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-uc5k88 .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-uc5k88 .gatsby-highlight pre[class~="language-py"]:before,.css-uc5k88 .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-uc5k88 .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-uc5k88 .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-uc5k88 .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-uc5k88 .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-uc5k88 .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-uc5k88 .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-uc5k88 .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-uc5k88 .gatsby-highlight pre[class~='language-json']:before,.css-uc5k88 .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-uc5k88 .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-uc5k88 .gatsby-highlight>code[class*="language-"],.css-uc5k88 .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-uc5k88 .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-uc5k88 .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-uc5k88 .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-uc5k88 .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-uc5k88 .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-uc5k88 .token-line{padding-right:1rem;}.css-uc5k88 .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-uc5k88 .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}</style><main id="skip-nav" class=" css-uc5k88"><style data-emotion="css w1q1hj">.css-w1q1hj{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.875rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 768px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 1024px){.css-w1q1hj{font-size:3rem;}}</style><h1 class="css-w1q1hj">Testing and Code Coverage with Node.js Apps</h1><style data-emotion="css 15ce8we">.css-15ce8we{color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:1rem;}.css-15ce8we a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-15ce8we{font-size:1rem;}}@media screen and (min-width: 768px){.css-15ce8we{font-size:1.25rem;}}</style><p class="css-15ce8we"><time>02.24.2014</time> — <a class="css-bpdkdn" href="/tags/java-script">JavaScript</a>, <a class="css-bpdkdn" href="/tags/node-js">Node.js</a>, <a class="css-bpdkdn" href="/tags/testing">Testing</a></p><style data-emotion="css 1mae7sn">.css-1mae7sn{margin-top:4rem;margin-bottom:4rem;}.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;border-radius:4px;box-shadow:rgba(0, 0, 0, 0.1) 0px 16px 16px 0px,rgba(0, 0, 0, 0.1) 0px 8px 8px 0px,rgba(0, 0, 0, 0.1) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}.css-1mae7sn .gatsby-resp-image-wrapper .gatsby-resp-image-image{border-radius:4px;}.css-1mae7sn figure{margin:0;}.css-1mae7sn figure img{border-radius:4px;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);max-width:100%;}</style><section class="css-1mae7sn"><div class="css-zezy6m"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 546px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.16666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAA//aAAwDAQACEAMQAAAB1nU4oIn/xAAaEAACAgMAAAAAAAAAAAAAAAAAAQIREBIi/9oACAEBAAEFAqzrG2onJ//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/Aar/xAAVEQEBAAAAAAAAAAAAAAAAAAAAE//aAAgBAgEBPwGab//EABcQAQEBAQAAAAAAAAAAAAAAAAAxEDL/2gAIAQEABj8CuVEcv//EABoQAQEBAQADAAAAAAAAAAAAAAEAETFx4fD/2gAIAQEAAT8hwaMUDtoRTXXmN73xt//aAAwDAQACAAMAAAAQDM//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8Q2j//xAAZEQACAwEAAAAAAAAAAAAAAAAAARFRoXH/2gAIAQIBAT8QjS05Wn//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFxYf/aAAgBAQABPxC0FZnLADse45kPqEUPZtbQAGw/cAdH1M//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Istanbul Code Coverage"
        title=""
        src="/static/725f87229ea90851873b5b6bec94fa80/88627/istanbul_code_coverage_banner_screenshot.jpg"
        srcset="/static/725f87229ea90851873b5b6bec94fa80/46946/istanbul_code_coverage_banner_screenshot.jpg 240w,
/static/725f87229ea90851873b5b6bec94fa80/55489/istanbul_code_coverage_banner_screenshot.jpg 480w,
/static/725f87229ea90851873b5b6bec94fa80/88627/istanbul_code_coverage_banner_screenshot.jpg 546w"
        sizes="(max-width: 546px) 100vw, 546px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></div>
<style data-emotion="css vehe2z">.css-vehe2z{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-vehe2z{font-size:1rem;}}@media screen and (min-width: 768px){.css-vehe2z{font-size:1.25rem;}}</style><style data-emotion="css z0logh">.css-z0logh{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}</style><p class="css-z0logh">Developing maintainable apps requires having good test coverage. The JavaScript community has created some awesome tools that make it easy to implement workflows for code linting, unit/integration testing, and measuring code coverage. This post focuses on how to develop tests with <style data-emotion="css 1d2wwf6">.css-1d2wwf6{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1d2wwf6:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css 1diwg7s">.css-1diwg7s{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="http://mochajs.org/" class="css-1diwg7s">Mocha</a> and <a href="https://github.com/visionmedia/supertest" class="css-1diwg7s">Supertest</a> and how to generate code coverage reports with <a href="https://gotwarlost.github.io/istanbul/" class="css-1diwg7s">Istanbul</a>.</p>
<style data-emotion="css 14xm7q2">.css-14xm7q2{max-width:650px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:space-evenly;-ms-flex-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly;}</style><style data-emotion="css 1as8rod">.css-1as8rod{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;max-width:650px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:space-evenly;-ms-flex-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly;}@media screen and (min-width: 640px){.css-1as8rod{padding:2rem;}}</style><div class="css-1as8rod"><style data-emotion="css 1c44k4x">.css-1c44k4x{min-width:225px;font-size:1.25rem;padding-left:4rem;padding-right:4rem;padding-top:1rem;padding-bottom:1rem;margin-bottom:2rem;color:var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-background);border:1px solid;border-color:var(--theme-ui-colors-primary);text-align:center;-webkit-text-decoration:none;text-decoration:none;}@media screen and (min-width: 640px){.css-1c44k4x{margin-bottom:0;}}.css-1c44k4x:hover,.css-1c44k4x:focus{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><a href="https://github.com/gregjopa/express-app-testing-demo" target="_blank" rel="noopener noreferrer" class="css-1c44k4x">Download</a><a href="https://express-app-testing-demo.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="css-1c44k4x">Demo</a></div>
<style data-emotion="css 90ntna">.css-90ntna{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-90ntna{font-size:2.25rem;}}</style><style data-emotion="css 1h962gv">.css-1h962gv{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}</style><h2 class="css-1h962gv">Demo App Functionality</h2>
<p class="css-z0logh">I created a simple node.js app to demonstrate testing and code coverage. The source code for this app is on github here: <a href="https://github.com/gregjopa/express-app-testing-demo" class="css-1diwg7s">https://github.com/gregjopa/express-app-testing-demo</a>. This app uses <a href="https://www.flickr.com/services/feeds/docs/photos_public/" class="css-1diwg7s">Flickr&#x27;s public feed api</a> to search public photos. It has basic form functionality for entering search terms and based on that form input it retrieves photos. All logic in this app is handled on the server-side and no client-side JavaScript is used. This app is hosted on heroku here: <a href="https://express-app-testing-demo.herokuapp.com/" class="css-1diwg7s">https://express-app-testing-demo.herokuapp.com/</a>.</p>
<p class="css-z0logh">This app uses the <a href="https://expressjs.com/" class="css-1diwg7s">express.js framework</a> along with <a href="https://github.com/request/request" class="css-1diwg7s">request</a> and <a href="https://github.com/tj/ejs" class="css-1diwg7s">ejs</a>. <a href="https://gruntjs.com/" class="css-1diwg7s">Grunt</a> is used for implementing workflows for code linting, testing, and code coverage.</p>
<h2 class="css-1h962gv">Preparing a Test Plan</h2>
<p class="css-z0logh">I recommend designing a test plan at the same time you design your application&#x27;s functionality. Think about the different components of the app and how they can break. For example, if the app depends on an external api service assume that the api service can go offline or return invalid data. If the app accepts user input assume that the user input can be invalid and possibly dangerous. In my opinion the purpose of the test plan is to be an outline for developers as they write tests. The test plan should not be documentation for the tests since it can easily become out-of-date. Instead, your tests should be self-describing. For example, here is a simple test plan for this photo searching app:</p>
<style data-emotion="css rc057y">.css-rc057y li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-rc057y li{font-size:1rem;}}@media screen and (min-width: 768px){.css-rc057y li{font-size:1.25rem;}}</style><style data-emotion="css 15vy6y4">.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}</style><ol class="css-15vy6y4">
<li class="css-zezy6m">Form input - if the user enters valid search terms the app should work.</li>
<li class="css-zezy6m">Form input - if the user enters invalid search terms the app should return an error.</li>
<li class="css-zezy6m">API data - if the data returned from the flickr api is valid the app should work.</li>
<li class="css-zezy6m">API data - if the data returned from the flickr api is invalid the app should return an error.</li>
<li class="css-zezy6m">API data - if the flickr api returns zero results an alert should be returned to notify the user.</li>
<li class="css-zezy6m">Route - if the app is working correctly a 200 http status code should be returned.</li>
<li class="css-zezy6m">Route - if there is a server error a 500 http status code should be returned.</li>
</ol>
<h2 class="css-1h962gv">Tests</h2>
<p class="css-z0logh">There are different types of tests that can be implemented when testing web applications:</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m">Unit tests - isolate a small block of code and test it&#x27;s intention</li>
<li class="css-zezy6m">Integration tests - test how different components of an application work together</li>
<li class="css-zezy6m">Service tests - isolate a service to see if it&#x27;s working correctly (ex: api endpoint, database)</li>
</ul>
<p class="css-z0logh">My test app includes unit tests, integration tests, and api tests. I&#x27;m using the assertion library <a href="https://github.com/tj/should.js" class="css-1diwg7s">should.js</a> for clean and readable tests.</p>
<style data-emotion="css 11bn2j6">.css-11bn2j6{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-11bn2j6{font-size:1.875rem;}}</style><style data-emotion="css ns8t27">.css-ns8t27{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}</style><h3 class="css-ns8t27">Unit Tests</h3>
<p class="css-z0logh">Form validation methods are a good example for unit testing. Typically form validation methods take in a single input parameter and use a regular expression to see the input value is valid or not.</p>
<p class="css-z0logh">Here&#x27;s a form validation method with a couple Mocha unit tests:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" data-linenumber="false"><style data-emotion="css ce1lkk">.css-ce1lkk{background-color:var(--theme-ui-colors-background);border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;position:absolute;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-ce1lkk{font-size:14px;}}@media screen and (min-width: 768px){.css-ce1lkk{font-size:16px;}}.css-ce1lkk[disabled]{cursor:not-allowed;}.css-ce1lkk:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-javascript"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">isValidCommaDelimitedList</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// allow letters, commas, and spaces</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> commaDelimitedListRegEx </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token regex regex-source language-regex" style="color:var(--theme-ui-colors-regex-color)">^[A-Za-z,\s]+$</span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:var(--theme-ui-colors-keyword-color)">return</span><span class="token plain"> commaDelimitedListRegEx</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">test</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// tests</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token function" style="color:var(--theme-ui-colors-function-color)">describe</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;isValidCommaDelimitedList(value)&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">it</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;should return true for valid list of search terms&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> tags </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;california, sunset, red&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    formValidator</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">isValidCommaDelimitedList</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">tags</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token boolean" style="color:var(--theme-ui-colors-boolean-color)">true</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">it</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;should return false for search term containing numbers&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> tags </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;dogs123&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    formValidator</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">isValidCommaDelimitedList</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">tags</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token boolean" style="color:var(--theme-ui-colors-boolean-color)">false</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<h3 class="css-ns8t27">Integration Tests for Routes</h3>
<p class="css-z0logh">Node web application routes can be tested using the <a href="https://github.com/visionmedia/supertest" class="css-1diwg7s">Supertest</a> library. Supertest can start up a node app, make http requests to routes, and run assertions on http responses. It can pass parameters to routes and run assertions on things like the response http status code, content type, and execute regular expressions against the response body.</p>
<p class="css-z0logh">If your routes depend on accessing a database or api I recommend mocking that data for your route tests. This way your database or api won&#x27;t influence your route test results. I&#x27;m using the node module <a href="https://github.com/node-nock/nock" class="css-1diwg7s">nock</a> in my project to mock the data returned by the flickr public feed api.</p>
<p class="css-z0logh">Here are some route tests:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-javascript"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// route</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">app</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">get</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;/&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> tags </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">param</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;tags&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> tagmode </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">param</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;tagmode&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// more route logic here ...</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// tests</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token function" style="color:var(--theme-ui-colors-function-color)">describe</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;index route&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">it</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;should respond with a 200 with invalid query parameters&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// invalid query parameters will return html containing an alert message</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">request</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">get</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;/?tags=california123&amp;tagmode=all&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">expect</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token regex regex-source language-regex" style="color:var(--theme-ui-colors-regex-color)">html</span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">expect</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">200</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">expect</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token regex regex-source language-regex" style="color:var(--theme-ui-colors-regex-color)">&lt;div class=&quot;alert alert-danger&quot;&gt;</span><span class="token regex regex-delimiter" style="color:var(--theme-ui-colors-regex-color)">/</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">it</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;should respond with a 500 error due to bad jsonp data&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// mock the flickr public feed api endpoint with invalid jsonp data that&#x27;s missing parentheses</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> jsonpData </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;jsonFlickrFeed{&quot;items&quot;: [&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;{ &quot;title&quot;: &quot;Boating&quot;,&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;&quot;media&quot;: {&quot;m&quot;:&quot;http://farm4.staticflickr.com/3727/12608622365_9e9b8b377d_m.jpg&quot;} },&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;{ &quot;title&quot;: &quot;Signs&quot;,&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;&quot;media&quot;: {&quot;m&quot;:&quot;http://farm8.staticflickr.com/7446/12608714423_efaf73400c_m.jpg&quot;} }&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;]}&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> flickrFeedApi </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">nock</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;http://api.flickr.com&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">get</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;/services/feeds/photos_public.gne?tags=california&amp;tagmode=all&amp;format=json&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">reply</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">200</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> jsonpData</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">request</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">get</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;/?tags=california&amp;tagmode=all&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">expect</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">500</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<h3 class="css-ns8t27">API Tests</h3>
<p class="css-z0logh">It can be helpful to have tests for an external service used by your app. If you rely on external services and you have tests for them then when your app breaks it easier to determine if the problem is with your code base or the external service.</p>
<p class="css-z0logh">Mocha makes it easily to asynchronously test an api endpoint. Here&#x27;s a test I have for flickr&#x27;s public feed api:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-javascript"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// flickr public feed api</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token constant" style="color:var(--theme-ui-colors-constant-color)">API</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">params</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">this</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">uri</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;http://api.flickr.com/services/feeds/photos_public.gne&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">this</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">qs</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">tags</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> params</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">tags</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">||</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">tagmode</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> params</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">tagmode</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">||</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">format</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> params</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">format</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">||</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;json&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// test</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token function" style="color:var(--theme-ui-colors-function-color)">describe</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;flickr public feed api&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">it</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;should return expected json format&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> apiTest </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">new</span><span class="token plain"> </span><span class="token class-name">API</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">tags</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;california&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">tagmode</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;all&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    request</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">get</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">apiTest</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token parameter"> response</span><span class="token parameter punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      response</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">statusCode</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">equal</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">200</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;Invalid http status code&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> json </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> jsonpHelper</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">parseJSONP</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">body</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      json</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">have</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">property</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;items&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> photos </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">items</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      photos</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">an</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">instanceOf</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      photos</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">forEach</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">photo</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        photo</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">should</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">have</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">keys</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;title&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;link&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;media&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;date_taken&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;published&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;author&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;author_id&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;tags&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">done</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<h2 class="css-1h962gv">Code Coverage</h2>
<p class="css-z0logh">Code coverage tools analyze an application&#x27;s source code and test suite and then identify code that&#x27;s missing tests. Code coverage provides a way to measure the quality of your application.</p>
<h3 class="css-ns8t27">Istanbul</h3>
<p class="css-z0logh"><a href="https://gotwarlost.github.io/istanbul/" class="css-1diwg7s">Istanbul</a> is a JavaScript code coverage tool that provides instrumentation and reporting. It has an html reporting option and also an lcov reporting option that can be used with the code quality tool <a href="https://www.sonarqube.org/" class="css-1diwg7s">SonarQube</a>.</p>
<p class="css-z0logh">Here&#x27;s a screenshot of the Istanbul html reporter for a module with zero tests:</p>
<div class="css-zezy6m"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 898px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.41666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVR42nWPS2sTURiG55+6Lm4qNCpiG0QXIujK6kKCSG20UNooQkvrJptYxZpmZtK5JXM9mTO3M2euaTKXc6SzUKL04eHj3bzwfkwyuRcILffyAZLu29w6GG0YwxZk1yu4VTtPqLNFYLsJm9RpE+cRdR42+VrGZdfMn7c19m0gPbXPbwHuWTDtxOIakjdDc39htX3pMdK7c20DK1uZ9ZLCOwTepbBFYYtBWsdQth3zXQB2oNpJve4S7xXRhzl8tXC3r+wXS7dTBh8L//3S3y2CboV2/8iUVWWfnXhfj/WjU6F3IPYOx4ef9eMj/csb49Nz2H9d5T6llBByfVdlimJps+fh6AILsseNgjEbst/9YR+PB4kslklOCCF1ReuakvqfOrNYLFV24PDDUFLdMZdqciac4l/78cXeFeBIWdObYbIs1/gz75ILFc2XREcYe7ISygIanaBRD7E9d3iQmvwcOlWW/l/OdP4HEvncnKW6itVJoquZJsXit1QexOIA8f14ysfqtIgwbb7/W06TVAKi7hjSRBUUBUDoBsjHEYozlORhMs8XBblpdhRFwAK+5wLLskzLBjN7BmYABL6HQ4QCf55ndVVWZeMqDELI87wwDJMGjLFhmpZpWzowDAMAYJqm3oAQwqv8BiIJRmNa9bXKAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Istanbul Bad Test Coverage"
        title=""
        src="/static/137a96aa7a25a264ee273acafcb0d260/27257/istanbul_bad_test_coverage_screenshot.png"
        srcset="/static/137a96aa7a25a264ee273acafcb0d260/5243c/istanbul_bad_test_coverage_screenshot.png 240w,
/static/137a96aa7a25a264ee273acafcb0d260/ab158/istanbul_bad_test_coverage_screenshot.png 480w,
/static/137a96aa7a25a264ee273acafcb0d260/27257/istanbul_bad_test_coverage_screenshot.png 898w"
        sizes="(max-width: 898px) 100vw, 898px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></div>
<p class="css-z0logh">After adding tests for all methods in this module the html report will look like this:</p>
<div class="css-zezy6m"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 898px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.41666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB30lEQVR42nXO3W/SUBgG8P7fXqgXjqjbBWTMu2XLMMGhyYCm82MiUQErKGHtaBGhLT3taE/POe05bbf1Q8yIXojZL8/Fc/O8ebma+LTaeVz9vH3c3a60H1U+bB29L1TaW7xUFOQ9Qd7jpZIgl0/lZ7xcEuRdQS7zUpGXSrxU4g7b9w/OHrwTj19/O9hv3XvZKX4cNZrD3ee9h2+/H3XVem1QEPr7nXGj1i/UB+XWuHIiPWnIOw15h2uf104Hh2ejamv04s2g8kl59eVnXZw3OpOT3rTem972r1qzr/Gi1hTnt6Wv/wmXZ/lw1ppbU7CAqqL+UKfKeLLQF6a9BJeXjrfMsmx1By5NEkUbWo4ZBLHrOh6EGPsQesTHLAzSNPn112q1Ge7m+uZ81l0sNR9HruuwiIVX14QElPpXSbze3IkLw0iaicAxCAkhhM5yCaFDMMGYYoQwQo7jhIxFUZSm6eY4CqOL+cCGZhwljDGCSeD7jIUBZZT6ge97nkdpQAOaJMnmmFE6NRTDnE1UVRmPLQBc1/UgRAghjDEmURTd9TwXBIEJAHQdAIAJgG3Ztm3ZluV5HiEYIRTHcZ7nWZbl/+EQQq7rYozpGiHEMAzTsBYa0A0DrE9qmqbrOkKI/Os31npFFikmAuYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Istanbul Good Test Coverage"
        title=""
        src="/static/fb128084a578ae6225fa2e45ef010542/27257/istanbul_good_test_coverage_screenshot.png"
        srcset="/static/fb128084a578ae6225fa2e45ef010542/5243c/istanbul_good_test_coverage_screenshot.png 240w,
/static/fb128084a578ae6225fa2e45ef010542/ab158/istanbul_good_test_coverage_screenshot.png 480w,
/static/fb128084a578ae6225fa2e45ef010542/27257/istanbul_good_test_coverage_screenshot.png 898w"
        sizes="(max-width: 898px) 100vw, 898px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></div>
<p class="css-z0logh">Istanbul can be installed as a global node module and used from the command line. Or you can use Istanbul as a local module with Grunt which is the approach I took with my test app. I describe configuring Istanbul with Grunt in the following &quot;Grunt Workflow&quot; section.</p>
<h3 class="css-ns8t27">SonarQube</h3>
<p class="css-z0logh">SonarQube is a code quality tool that provides code coverage reporting as well as many other features. It&#x27;s possible to integrate a JavaScript project into Sonar by using Istanbul&#x27;s instrumentation. Istanbul can output an lcov.info file that can be used by the sonar-runner. The <a href="https://docs.sonarqube.org/display/SONARQUBE51/Installing+and+Configuring+SonarQube+Runner" class="css-1diwg7s">sonar-runner</a> works by reading a config file at the root of your project, performing some analysis, and then uploading statistics to the SonarQube server. Here is a link to my test project&#x27;s sonar config file: <a href="https://github.com/gregjopa/express-app-testing-demo/blob/master/sonar-project.properties" class="css-1diwg7s">https://github.com/gregjopa/express-app-testing-demo/blob/master/sonar-project.properties</a></p>
<p class="css-z0logh">Sonar stores code coverage statistics about your application in a database which makes it possible to compare different versions of your application to see if your code coverage is getting better or worse.</p>
<p class="css-z0logh">Here&#x27;s a screenshot of this test project in SonarQube:</p>
<div class="css-zezy6m"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 935px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 62.083333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVR42o2R3W/TMBTF8/8/gMTEYIWiPoDUCuWRjydQNyQEKpnE0i+l67ZqadKldZzEvo7jaxs1UbsyBOInWbqydXzOvdd58vzV46PjR0fHT5+ddLvd12+29Hq9TqfTarVe1Lzc0W63Xdf1Ly6CIBgMBs77yeatvzn5sfZjblGKskTEsiwBhK0xxmit7Q6tNSI2985n//rj+aw/T8e362AyzgtmjElJSilFVFprAZAkCQAoxAr4bDpJM1rkOQA4X6bhp+Hi6yK7IZxskizPrbWiFPEqllJaa6WUURQRQupaXN/MOedRFGVZ5pxNbt99H/Vn66ukiJchiLKJtKfpoqoqRFSoGGeodrFPR4v+dPkt5PO7bL2KtTH2dxDR8zx/+DOKl6ir/SC24rPp0j09/+CHVwlLVjEHeOCstaZpmm5PKis4/NdJoYopu2NyReh4NGyczYG/+SPLvXhfKaUYY1rfGzbUYmPqNA/F25e6AoBZEORFYa0Nw7AZNSIeLvmvzkVRXM4vjUEhStd1Pc8jhAgh/kvcbKV2M4TmhGwopUqpf/T8C5B9nqWYW4iJAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="SonarQube Code Analysis"
        title=""
        src="/static/681ab9a86784bb15be92171355810c86/724ba/sonarqube_code_analysis_screenshot.png"
        srcset="/static/681ab9a86784bb15be92171355810c86/5243c/sonarqube_code_analysis_screenshot.png 240w,
/static/681ab9a86784bb15be92171355810c86/ab158/sonarqube_code_analysis_screenshot.png 480w,
/static/681ab9a86784bb15be92171355810c86/724ba/sonarqube_code_analysis_screenshot.png 935w"
        sizes="(max-width: 935px) 100vw, 935px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></div>
<h2 class="css-1h962gv">Grunt Workflow</h2>
<p class="css-z0logh">Grunt can be used to configure Mocha and Istanbul so you don&#x27;t need to worry about installing them as global modules. Here are the grunt plugins I&#x27;m using for Mocha and Instanbul:</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><a href="https://github.com/pghalliday/grunt-mocha-test" class="css-1diwg7s">grunt-mocha-test</a></li>
<li class="css-zezy6m"><a href="https://github.com/taichi/grunt-istanbul" class="css-1diwg7s">grunt-istanbul</a></li>
</ul>
<p class="css-z0logh">The grunt-istanbul plugin is easy to use with Mocha or any other testing framework. To configure the grunt-istanbul plugin setup a task to run the following:</p>
<ol class="css-15vy6y4">
<li class="css-zezy6m">Instrument your source code</li>
<li class="css-zezy6m">Run your test suite against your instrumented source code</li>
<li class="css-zezy6m">Store your coverage results</li>
<li class="css-zezy6m">Make the report</li>
</ol>
<p class="css-z0logh">I follow these steps in my test project&#x27;s Gruntfile here:
<a href="https://github.com/gregjopa/express-app-testing-demo/blob/master/Gruntfile.js" class="css-1diwg7s">https://github.com/gregjopa/express-app-testing-demo/blob/master/Gruntfile.js</a></p>
<p class="css-z0logh">When I normally run my test suite I want it to point directly at my source code. But when I run the Istanbul code coverage task I want my test suite to point at the instrumented source code. To accomplish this I created a require_helper module. This require_helper module uses an environment variable to determine which path to use for loading the source code to run the tests against. When I execute my code coverage grunt task I set the environment variable using the <a href="https://github.com/jsoverson/grunt-env" class="css-1diwg7s">grunt-env</a> plugin to point to the instrumented source code. Here&#x27;s some example code to demonstrate how this requireHelper module works:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-javascript"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// require_helper.js</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">module</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method-variable function-variable method function property-access" style="color:var(--theme-ui-colors-function-color)">exports</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">path</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:var(--theme-ui-colors-keyword-color)">return</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">require</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token constant" style="color:var(--theme-ui-colors-constant-color)">APP_DIR_FOR_CODE_COVERAGE</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">||</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;../app/&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">+</span><span class="token plain"> path</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// using requireHelper in a test</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> requireHelper </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">require</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;../require_helper&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">var</span><span class="token plain"> formValidator </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">requireHelper</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;form_validator&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<h2 class="css-1h962gv">Conclusion</h2>
<p class="css-z0logh">Code coverage is easy to setup using Grunt and Istanbul. Having statistics like code coverage will make your application easier to maintain and update. But code coverage is not perfect so make sure to still manually review your source code to see if you have tests for every use case. For my next post I plan on writing about testing and code coverage for client-side JavaScript apps.</p></section></main><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div>© <!-- -->2023<!-- --> by <!-- -->Greg Jopa<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/main/themes/gatsby-theme-minimal-blog" class="css-aizfxq">Theme</a> <!-- -->by<!-- --> <a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-aizfxq">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K91Y4WP4BG"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-K91Y4WP4BG', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2014/02/testing-and-code-coverage-with-node-js-apps";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-dfe982a57bfbc2ac998c.js\"],\"component---1765153638-nt-posts-conditional-fixed-positioning-with-jquery-index-mdx\":[\"/component---1765153638-nt-posts-conditional-fixed-positioning-with-jquery-index-mdx-90eeaeb16e9d8229e9da.js\"],\"component---1984228027-nt-posts-render-svg-charts-server-side-with-d-3-js-index-mdx\":[\"/component---1984228027-nt-posts-render-svg-charts-server-side-with-d-3-js-index-mdx-2e83f8448f1944e98ef5.js\"],\"component---2300927555-ml-5-guitar-tab-player-with-firefox-audio-data-api-index-mdx\":[\"/component---2300927555-ml-5-guitar-tab-player-with-firefox-audio-data-api-index-mdx-80fbe006c57641a73386.js\"],\"component---2479082674-s-asp-net-mvc-3-with-jquery-mobile-and-google-maps-index-mdx\":[\"/component---2479082674-s-asp-net-mvc-3-with-jquery-mobile-and-google-maps-index-mdx-3e570b46c8e942c86bcd.js\"],\"component---3035987480-house-audits-for-static-sites-with-git-hub-actions-index-mdx\":[\"/component---3035987480-house-audits-for-static-sites-with-git-hub-actions-index-mdx-f031b7fa7ac71fc62496.js\"],\"component---3615670316-ulate-note-frequencies-in-javascript-with-music-js-index-mdx\":[\"/component---3615670316-ulate-note-frequencies-in-javascript-with-music-js-index-mdx-9fb2c86db2afe6f7c1d9.js\"],\"component---446125790-sts-crud-operations-with-xml-data-in-asp-net-mvc-3-index-mdx\":[\"/component---446125790-sts-crud-operations-with-xml-data-in-asp-net-mvc-3-index-mdx-1ce6b29bc75a8379c80d.js\"],\"component---880405628--posts-testing-and-code-coverage-with-node-js-apps-index-mdx\":[\"/component---880405628--posts-testing-and-code-coverage-with-node-js-apps-index-mdx-5f65c750e0774488a52b.js\"],\"component---961273103-sts-5-must-have-firefox-plugins-for-web-developers-index-mdx\":[\"/component---961273103-sts-5-must-have-firefox-plugins-for-web-developers-index-mdx-ee86f465384e6ef40fcd.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-436fa513a8c364121495.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-ed0f424e4a73f36e8d6e.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-pages-about-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-pages-about-index-mdx-0c3a88984489a837eaf1.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-flickr-feed-with-fancybox-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-flickr-feed-with-fancybox-index-mdx-cd0ff32e737396a1fe8e.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-html-5-cloud-composer-app-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-html-5-cloud-composer-app-index-mdx-b1b7ef5423ecef66e369.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-integrating-vexflow-with-gatsby-js-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-integrating-vexflow-with-gatsby-js-index-mdx-4ce1f4965f66aaae3993.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-javascript-interview-questions-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-javascript-interview-questions-index-mdx-624870af0a37a0876b59.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-piano-flash-cards-react-app-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-piano-flash-cards-react-app-index-mdx-70fedd095d6abdcd4c88.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-piano-sounds-with-web-audio-api-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-piano-sounds-with-web-audio-api-index-mdx-a7eadcacfc9048f48f51.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-render-d-3-charts-server-side-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-home-runner-work-gregjopa-github-io-gregjopa-github-io-content-posts-render-d-3-charts-server-side-index-mdx-67cd4aa14b6a81a541cb.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-87678a32a844713e82d2.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-d8e052811b7dafd2ebb4.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-c05340b2a095bec28227.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="e4922c02d4dc1148d91b";</script><script src="/webpack-runtime-e317d822a37b6f6c1da9.js" async></script><script src="/framework-618735844a6d4db17e20.js" async></script><script src="/app-dfe982a57bfbc2ac998c.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>